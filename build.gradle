/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.6/userguide/building_java_projects.html
 */

plugins {
    id 'application'
    id 'com.diffplug.spotless' version '6.25.0'
}

repositories {
    // Use Maven Central for resolving dependencies.
    gradlePluginPortal()
    google()
    mavenCentral()
    maven { url "https://jitpack.io" } 
	maven { url "https://plugins.gradle.org/m2/" } 
    maven { url 'https://repo.jenkins-ci.org/public/' } 
    maven { url 'https://repo.gradle.org/gradle/libs-releases' } 
    mavenLocal()
}

dependencies {
    // This dependency is used by the application.	
        
    implementation files("${project(':lib').buildDir}/libs/${rootProject.name}.jar")    
    implementation 'org.ow2.asm:asm:9.8'
}

spotless {
    java {
        target "**/*.java"		  
        googleJavaFormat()
    }
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

application {
    // Define the main class for the application.
    mainClass = 'groovy.runner.App'
}

tasks.named('startScripts') {
    dependsOn ':lib:shadowJar'
}

tasks.named('spotlessJava') {
    dependsOn '::lib:spotlessJava'
}

tasks.named('run') {
    dependsOn ':lib:shadowJar'
}

tasks.named('compileJava') {
    dependsOn(':lib:shadowJar')
}
